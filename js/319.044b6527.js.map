{"version":3,"file":"js/319.044b6527.js","mappings":"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","sources":["webpack://frontend/./src/pages/board/WritePost.vue","webpack://frontend/./src/pages/board/WritePost.vue?d3ee"],"sourcesContent":["<template>\r\n  <div class=\"form-container\">\r\n    <h2 class=\"form-title\">게시글 작성</h2>\r\n    <!-- 제목 입력 -->\r\n    <div class=\"form-group row\">\r\n      <label for=\"title\">제목</label>\r\n      <input type=\"text\" id=\"title\" v-model=\"form.Title\" placeholder=\"제목을 입력하세요.\" />\r\n    </div>\r\n    <!-- 작성자 -->\r\n    <div class=\"form-group row\">\r\n      <label for=\"author\">작성자</label>\r\n      <input type=\"text\" id=\"author\" v-model=\"form.Uid\" disabled />\r\n    </div>\r\n    <!-- 내용 입력 -->\r\n    <div class=\"form-group row\">\r\n      <label for=\"content\">내용</label>\r\n      <textarea id=\"content\" v-model=\"form.Content\" placeholder=\"내용을 입력하세요.\"></textarea>\r\n    </div>\r\n    <!-- 공지 설정 (관리자만 표시) -->\r\n    <div class=\"form-group row\" v-if=\"isAdmin\">\r\n      <label for=\"notice\">공지 설정</label>\r\n      <input type=\"checkbox\" id=\"notice\" v-model=\"form.Notice\" />\r\n    </div>\r\n    <!-- 이미지 업로드 -->\r\n    <div class=\"form-group row\">\r\n      <label for=\"photos\">이미지</label>\r\n      <div class=\"photo-upload\">\r\n        <input\r\n          type=\"file\"\r\n          id=\"photos\"\r\n          accept=\"image/*\"\r\n          @change=\"handleFileUpload\"\r\n          ref=\"fileInput\"\r\n          style=\"display: none;\"\r\n        />\r\n        <button @click=\"triggerFileInput\">이미지 선택</button>\r\n        <div class=\"photo-previews\">\r\n          <img\r\n            v-if=\"previews.length\"\r\n            :src=\"previews[0]\"\r\n            alt=\"미리보기 이미지\"\r\n            class=\"preview-image\"\r\n          />\r\n          <button v-if=\"previews.length\" @click=\"handleFileDelete\">삭제</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 작성 버튼 -->\r\n    <div class=\"form-actions\">\r\n      <button class=\"submit\" @click=\"submitPost\">작성하기</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {\r\n        Title: \"\",\r\n        Uid: \"\",\r\n        Content: \"\",\r\n        Notice: false, // 체크박스 상태 (기본값: false)\r\n      },\r\n      photos: [], // 업로드된 이미지\r\n      previews: [], // 이미지 미리보기 URL\r\n      isAdmin: false, // 로그인 사용자가 관리자(auth === 1)인지 여부\r\n    };\r\n  },\r\n  created() {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      try {\r\n        const user = jwtDecode(token);\r\n        this.form.Uid = user.userID;\r\n        this.isAdmin = user.auth === 1; // 관리자 여부 확인\r\n      } catch (error) {\r\n        console.error(\"JWT 디코딩 오류:\", error);\r\n        alert(\"로그인 정보가 유효하지 않습니다.\");\r\n        this.$router.push(\"/login\");\r\n      }\r\n    } else {\r\n      alert(\"로그인이 필요합니다.\");\r\n      this.$router.push(\"/login\");\r\n    }\r\n  },\r\n  methods: {\r\n    triggerFileInput() {\r\n      this.$refs.fileInput.click();\r\n    },\r\n    handleFileUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file && file.type.startsWith(\"image/\")) {\r\n        this.photos = [file];\r\n        this.previews = [URL.createObjectURL(file)];\r\n      } else {\r\n        alert(\"이미지만 업로드할 수 있습니다.\");\r\n      }\r\n    },\r\n    handleFileDelete() {\r\n      this.photos = [];\r\n      this.previews = [];\r\n    },\r\n    async submitPost() {\r\n      if (!this.form.Title.trim() || !this.form.Content.trim()) {\r\n        alert(\"제목과 내용을 모두 입력해주세요.\");\r\n        return;\r\n      }const now = new Date();\r\n  this.form.Reg_Date = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, \"0\")}-${String(\r\n    now.getDate()\r\n  ).padStart(2, \"0\")} ${String(now.getHours()).padStart(2, \"0\")}:${String(now.getMinutes()).padStart(2, \"0\")}:${String(\r\n    now.getSeconds()\r\n  ).padStart(2, \"0\")}`;\r\n      try {\r\n        const formData = new FormData();\r\n        formData.append(\"Title\", this.form.Title);\r\n        formData.append(\"Uid\", this.form.Uid);\r\n        formData.append(\"Content\", this.form.Content);\r\n        formData.append(\"Notice\", this.form.Notice ? \"1\" : \"0\"); // 공지 여부 설정\r\n        formData.append(\"Reg_date\", this.form.Reg_Date);\r\n        if (this.photos.length > 0) {\r\n          formData.append(\"Image\", this.photos[0]);\r\n        }\r\n        console.log(\"Reg_DATE\", this.form.Reg_Date);\r\n        const response = await axios.post(\"http://localhost:3000/writepost\", formData, {\r\n          headers: { \"Content-Type\": \"multipart/form-data\" },\r\n        });\r\n\r\n        console.log(\"서버 응답:\", response.data);\r\n        alert(\"게시글이 성공적으로 작성되었습니다.\");\r\n        this.$router.push(\"/board/page_1\");\r\n      } catch (error) {\r\n        console.error(\"게시글 작성 오류:\", error.response?.data);\r\n        alert(error.response?.data?.error || \"게시글 작성 중 오류가 발생했습니다.\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 스타일은 기존과 동일 */\r\n.form-container {\r\n  width: 950px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  border-style: solid;\r\n  border-color: black;\r\n  border-radius: 10px;\r\n  font-family: Arial, sans-serif;\r\n}\r\n\r\n.form-title {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.form-group.row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  border-top: 1px solid #ccc;\r\n  padding: 10px 0;\r\n}\r\n\r\nlabel {\r\n  font-weight: bold;\r\n  flex: 0 0 80px;\r\n}\r\n\r\ninput[type=\"text\"],\r\ntextarea {\r\n  flex: 1;\r\n  padding: 8px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  font-family: Arial, sans-serif;\r\n  margin-left: 20px;\r\n}\r\n\r\ntextarea {\r\n  height: 150px;\r\n}\r\n\r\n.photo-upload {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  gap: 10px;\r\n}\r\n\r\n.photo-previews {\r\n  margin-top: 10px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.preview-image {\r\n  width: 100px;\r\n  height: 100px;\r\n  object-fit: cover;\r\n  border-radius: 4px;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n.form-actions {\r\n  text-align: right;\r\n  margin-top: 20px;\r\n}\r\n\r\n.submit {\r\n  padding: 10px 20px;\r\n  background-color: #28a745;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.submit:hover {\r\n  background-color: #218838;\r\n}\r\n</style>\r\n","import { render } from \"./WritePost.vue?vue&type=template&id=09ebd813&scoped=true\"\nimport script from \"./WritePost.vue?vue&type=script&lang=js\"\nexport * from \"./WritePost.vue?vue&type=script&lang=js\"\n\nimport \"./WritePost.vue?vue&type=style&index=0&id=09ebd813&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-09ebd813\"]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","for","type","id","_cache","$event","$data","form","Title","placeholder","_hoisted_3","Uid","disabled","_hoisted_4","Content","isAdmin","_hoisted_5","Notice","_createCommentVNode","_hoisted_6","_hoisted_7","accept","onChange","args","$options","handleFileUpload","ref","style","onClick","triggerFileInput","_hoisted_8","previews","length","src","alt","_hoisted_9","handleFileDelete","_hoisted_10","submitPost","data","photos","created","token","localStorage","getItem","user","jwtDecode","this","userID","auth","error","console","alert","$router","push","methods","$refs","fileInput","click","event","file","target","files","startsWith","URL","createObjectURL","trim","now","Date","Reg_Date","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","formData","FormData","append","log","response","axios","post","headers","__exports__","render"],"sourceRoot":""}