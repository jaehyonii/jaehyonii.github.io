"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[544],{3544:function(t,e,n){n.r(e),n.d(e,{default:function(){return nt}});var o=n(6768),s=n(4232),r=n(5130);const l={key:0,class:"product-detail"},a={class:"image-slider"},u={class:"slider-container"},i=["src"],c=["disabled"],d=["disabled"],p={class:"image-info"},k={class:"product-title"},h={class:"info-layout"},v={class:"product-info"},g={key:0},L={key:1},C={key:2},m={class:"seller-info"},I={class:"report-info"},y={class:"review-section"},w={key:1},b={key:0},_={key:1,class:"rating-input"},Q=["onClick"],X={key:2},A={class:"ratings-display"},D={key:1},E={key:0},R={key:1},f={class:"ratings-display"},P={class:"product-description"},x={class:"qna-section"},U=["onClick"],W={key:0},q={key:1},$={class:"question"},S={class:"q-content"},V={class:"q-date"},N=["onClick"],K={key:2},F={key:3},J={key:0,class:"answer"},B={class:"a-date"},G=["onClick"],j={key:1},O={key:0,class:"add-question"},T={class:"action-buttons-container"},z={key:1};function H(t,e,n,H,M,Y){return Object.keys(M.product).length>0?((0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("div",a,[(0,o.Lk)("div",u,[(0,o.Lk)("img",{src:Y.getCurrentImage(),alt:"상품 이미지",class:"main-image"},null,8,i),(0,o.Lk)("button",{class:"arrow-button left",onClick:e[0]||(e[0]=(...t)=>Y.prevImage&&Y.prevImage(...t)),disabled:0===M.currentImageIndex}," ◀ ",8,c),(0,o.Lk)("button",{class:"arrow-button right",onClick:e[1]||(e[1]=(...t)=>Y.nextImage&&Y.nextImage(...t)),disabled:M.currentImageIndex===M.imageSources.length-1}," ▶ ",8,d)]),(0,o.Lk)("p",p," 이미지 "+(0,s.v_)(M.currentImageIndex+1)+" / "+(0,s.v_)(M.imageSources.length),1),(0,o.Lk)("h2",k,(0,s.v_)(M.product.Title),1)]),(0,o.Lk)("div",h,[(0,o.Lk)("div",v,[e[26]||(e[26]=(0,o.Lk)("h2",null,"상품 정보",-1)),(0,o.Lk)("p",null,[e[19]||(e[19]=(0,o.Lk)("strong",null,"등록일:",-1)),(0,o.eW)(" "+(0,s.v_)(Y.formatDate(M.product.Reg_date)),1)]),(0,o.Lk)("p",null,[e[20]||(e[20]=(0,o.Lk)("strong",null,"가격:",-1)),(0,o.eW)(" "+(0,s.v_)(M.product.Price)+"원",1)]),(0,o.Lk)("p",null,[e[21]||(e[21]=(0,o.Lk)("strong",null,"카테고리:",-1)),(0,o.eW)(" "+(0,s.v_)(M.product.Group1)+" > "+(0,s.v_)(M.product.Group2),1)]),(0,o.Lk)("p",null,[e[22]||(e[22]=(0,o.Lk)("strong",null,"태그:",-1)),(0,o.eW)(" "+(0,s.v_)(M.product.Group3),1)]),0===M.product.Deal_way?((0,o.uX)(),(0,o.CE)("p",g,e[23]||(e[23]=[(0,o.Lk)("strong",null,"선호 거래 방식:",-1),(0,o.eW)(" 직거래")]))):((0,o.uX)(),(0,o.CE)("p",L,e[24]||(e[24]=[(0,o.Lk)("strong",null,"선호 거래 방식:",-1),(0,o.eW)(" 택배 거래")]))),0===M.product.Deal_way?((0,o.uX)(),(0,o.CE)("p",C,[e[25]||(e[25]=(0,o.Lk)("strong",null,"지역:",-1)),(0,o.eW)(" "+(0,s.v_)(M.product.Place),1)])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>Y.likeProduct&&Y.likeProduct(...t)),class:"like-button"}," ❤ "+(0,s.v_)(M.product.Like_cnt),1)]),(0,o.Lk)("div",m,[e[31]||(e[31]=(0,o.Lk)("h2",null,"판매자 정보",-1)),(0,o.Lk)("p",null,[e[27]||(e[27]=(0,o.Lk)("strong",null,"이름:",-1)),(0,o.eW)(" "+(0,s.v_)(M.product.Uname),1)]),(0,o.Lk)("p",null,[e[28]||(e[28]=(0,o.Lk)("strong",null,"성별:",-1)),(0,o.eW)(" "+(0,s.v_)(M.product.Sex),1)]),(0,o.Lk)("p",null,[e[29]||(e[29]=(0,o.Lk)("strong",null,"신고 당한 횟수:",-1)),(0,o.eW)(" "+(0,s.v_)(M.product.Rp_cnt),1)]),(0,o.Lk)("p",null,[e[30]||(e[30]=(0,o.Lk)("strong",null,"평점:",-1)),(0,o.eW)(" "+(0,s.v_)(M.product.Avg_rating),1)])]),(0,o.Lk)("div",I,[e[40]||(e[40]=(0,o.Lk)("h2",null,"게시물 신고",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>M.reportContent=t),placeholder:"신고 내용을 작성해주세요.",class:"report-textarea"},null,512),[[r.Jo,M.reportContent]]),(0,o.Lk)("button",{onClick:e[4]||(e[4]=(...t)=>Y.reportProduct&&Y.reportProduct(...t)),class:"report-button"},"신고"),(0,o.Lk)("div",y,[null===M.product.B_uid?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:e[5]||(e[5]=(...t)=>Y.requestProduct&&Y.requestProduct(...t)),class:"request-button"}," 구매 요청 ")):((0,o.uX)(),(0,o.CE)("div",w,[M.product.B_uid===M.userID?((0,o.uX)(),(0,o.CE)("div",b,[e[35]||(e[35]=(0,o.Lk)("h3",null,"후기 글",-1)),M.product.ReviewContent?(0,o.Q3)("",!0):(0,o.bo)(((0,o.uX)(),(0,o.CE)("textarea",{key:0,"onUpdate:modelValue":e[6]||(e[6]=t=>M.ReviewContent=t),placeholder:"후기 내용을 작성해주세요.",class:"review-textarea"},null,512)),[[r.Jo,M.ReviewContent]]),M.product.ReviewContent?((0,o.uX)(),(0,o.CE)("div",X,[(0,o.Lk)("p",null,[e[32]||(e[32]=(0,o.Lk)("strong",null,"내용:",-1)),(0,o.eW)(" "+(0,s.v_)(M.product.ReviewContent),1)]),(0,o.Lk)("div",A,[e[33]||(e[33]=(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,"별점:")],-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(M.product.Ratings,(t=>((0,o.uX)(),(0,o.CE)("span",{key:"display-"+t,class:"star_static"}," ★ ")))),128))]),(0,o.Lk)("p",null,[e[34]||(e[34]=(0,o.Lk)("strong",null,"등록일:",-1)),(0,o.eW)(" "+(0,s.v_)(Y.formatDate(M.product.ReviewReg_date)),1)])])):((0,o.uX)(),(0,o.CE)("div",_,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(5,(t=>(0,o.Lk)("span",{key:t,class:(0,s.C4)(["star",{active:t<=M.Ratings}]),onClick:e=>Y.setRating(t)}," ★ ",10,Q))),64))])),M.product.ReviewContent?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:e[7]||(e[7]=(...t)=>Y.submitReview&&Y.submitReview(...t)),class:"review-submit-button"}," 후기 저장 "))])):((0,o.uX)(),(0,o.CE)("div",D,[M.product.ReviewContent?((0,o.uX)(),(0,o.CE)("div",R,[(0,o.Lk)("p",null,[e[37]||(e[37]=(0,o.Lk)("strong",null,"내용:",-1)),(0,o.eW)(" "+(0,s.v_)(M.product.ReviewContent),1)]),(0,o.Lk)("div",f,[e[38]||(e[38]=(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,"별점:")],-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(M.product.Ratings,(t=>((0,o.uX)(),(0,o.CE)("span",{key:"display-"+t,class:"star_static"}," ★ ")))),128))]),(0,o.Lk)("p",null,[e[39]||(e[39]=(0,o.Lk)("strong",null,"등록일:",-1)),(0,o.eW)(" "+(0,s.v_)(Y.formatDate(M.product.ReviewReg_date)),1)])])):((0,o.uX)(),(0,o.CE)("div",E,e[36]||(e[36]=[(0,o.Lk)("h4",{align:"center"},"판매 완료.",-1),(0,o.Lk)("h4",{align:"center"},"리뷰가 아직 등록되지 않았습니다.",-1)])))]))]))])])]),(0,o.Lk)("section",P,[e[41]||(e[41]=(0,o.Lk)("h2",null,"상품 내용",-1)),(0,o.Lk)("p",null,(0,s.v_)(M.product.Content),1)]),(0,o.Lk)("section",x,[e[51]||(e[51]=(0,o.Lk)("h2",null,"질문 및 답변",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(M.qna,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.QuesNo,class:"qna-item",onClick:e=>Y.toggleAnswerInput(t.QuesNo)},[1===t.Q_private&&M.userID!==t.Uid&&M.product.Uid!==M.userID?((0,o.uX)(),(0,o.CE)("div",W,e[42]||(e[42]=[(0,o.Lk)("span",{class:"lock-icon"},"🔒",-1),(0,o.eW)(" 비밀 질문입니다. ")]))):((0,o.uX)(),(0,o.CE)("div",q,[(0,o.Lk)("p",$,[e[44]||(e[44]=(0,o.Lk)("strong",null,"작성자: ",-1)),(0,o.eW)(" "+(0,s.v_)(t.Username)+" ",1),(0,o.Lk)("span",S,[e[43]||(e[43]=(0,o.Lk)("strong",null,"Q:",-1)),(0,o.eW)(" "+(0,s.v_)(t.Question),1)]),(0,o.Lk)("span",V,"("+(0,s.v_)(Y.formatDate(t.Q_date))+")",1),M.userID===t.Uid?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:e=>Y.deleteQnA(t.QuesNo),class:"qna-delete-button"}," 삭제 ",8,N)):(0,o.Q3)("",!0)])])),1===t.A_private&&M.userID!==t.Uid&&M.product.Uid!==M.userID?((0,o.uX)(),(0,o.CE)("div",K,e[45]||(e[45]=[(0,o.eW)(" ㄴ "),(0,o.Lk)("span",{class:"lock-icon"},"🔒",-1),(0,o.eW)(" 비밀 답변입니다. ")]))):((0,o.uX)(),(0,o.CE)("div",F,[t.AnsNo?((0,o.uX)(),(0,o.CE)("p",J,[e[46]||(e[46]=(0,o.Lk)("strong",null,"ㄴ A:",-1)),(0,o.eW)(" "+(0,s.v_)(t.Answer)+" ",1),(0,o.Lk)("span",B,"("+(0,s.v_)(Y.formatDate(t.A_date))+")",1),M.userID===M.product.Uid?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:e=>Y.deleteQnA(t.AnsNo),class:"qna-delete-button"}," 삭제 ",8,G)):(0,o.Q3)("",!0)])):M.userID===M.product.Uid?((0,o.uX)(),(0,o.CE)("div",j,[M.selectedQuestionIndex===t.QuesNo?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"answer-input",onClick:e[12]||(e[12]=(0,r.D$)((()=>{}),["stop"]))},[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":e[8]||(e[8]=t=>M.newQnA=t),placeholder:"답변을 작성해주세요.",class:"answer-textarea"},null,512),[[r.Jo,M.newQnA]]),(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"radio",value:"0","onUpdate:modelValue":e[9]||(e[9]=t=>M.Private=t)},null,512),[[r.XL,M.Private]]),e[47]||(e[47]=(0,o.eW)(" 공개 "))]),(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"radio",value:"1","onUpdate:modelValue":e[10]||(e[10]=t=>M.Private=t)},null,512),[[r.XL,M.Private]]),e[48]||(e[48]=(0,o.eW)(" 비공개 "))]),(0,o.Lk)("button",{onClick:e[11]||(e[11]=(0,r.D$)((t=>Y.submitQnA()),["stop"])),class:"submit-answer-button"}," 답변 저장 ")])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)]))],8,U)))),128)),M.userID!==M.product.Uid?((0,o.uX)(),(0,o.CE)("div",O,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>M.newQnA=t),placeholder:"질문을 작성해주세요.",class:"question-textarea"},null,512),[[r.Jo,M.newQnA]]),(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"radio",value:"0","onUpdate:modelValue":e[14]||(e[14]=t=>M.Private=t)},null,512),[[r.XL,M.Private]]),e[49]||(e[49]=(0,o.eW)(" 공개 "))]),(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"radio",value:"1","onUpdate:modelValue":e[15]||(e[15]=t=>M.Private=t)},null,512),[[r.XL,M.Private]]),e[50]||(e[50]=(0,o.eW)(" 비공개 "))]),(0,o.Lk)("button",{onClick:e[16]||(e[16]=(...t)=>Y.submitQnA&&Y.submitQnA(...t)),class:"submit-question-button"}," 질문 등록 ")])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",T,[M.product.Uid===M.userID||1===M.auth?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:e[17]||(e[17]=(...t)=>Y.deleteProduct&&Y.deleteProduct(...t)),class:"delete-button"}," 삭제 ")):(0,o.Q3)("",!0),M.product.Uid===M.userID?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:e[18]||(e[18]=(...t)=>Y.updateProduct&&Y.updateProduct(...t)),class:"update-button"}," 수정 ")):(0,o.Q3)("",!0)])])):((0,o.uX)(),(0,o.CE)("div",z,e[52]||(e[52]=[(0,o.Lk)("p",null,"로딩 중...",-1)])))}n(4114),n(8992),n(4520);var M=n(4373),Y=n(5068),Z={props:["ino"],data(){return{product:{},qna:{},userID:"",auth:"",reportContent:"",imageSources:[],currentImageIndex:0,ReviewContent:"",Ratings:0,ReviewReg_date:"",Private:0,selectedQuestionIndex:null,newQnA:""}},methods:{async fetchProductDetails(){try{const t=await M.A.get(`http://localhost:3000/read/${this.ino}`);if(t.data){const e=localStorage.getItem("token"),n=(0,Y.s)(e);this.userID=n.userID,this.auth=n.auth,this.product=t.data[0],this.imageSources=[this.product.Image,this.product.Subimg1,this.product.Subimg2].filter((t=>t))}else console.error("상품 데이터를 가져오지 못했습니다.");const e=await M.A.get(`http://localhost:3000/readQnA/${this.ino}`);e.data?(this.qna=e.data,console.log(this.qna)):console.error("상품 데이터를 가져오지 못했습니다.")}catch(t){console.error("상품 정보를 가져오는 중 오류 발생:",t)}},getCurrentImage(){return`data:image/jpeg;base64,${this.imageSources[this.currentImageIndex]}`},nextImage(){this.currentImageIndex<this.imageSources.length-1&&(this.currentImageIndex+=1)},prevImage(){this.currentImageIndex>0&&(this.currentImageIndex-=1)},formatDate(t){const e={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};return new Date(t).toLocaleDateString("ko-KR",e)},async likeProduct(){try{if(this.product.Uid!==this.userID){const t=await M.A.post(`http://localhost:3000/hit/${this.ino}`,{Uid:this.userID});t.data.success?this.product.Like_cnt+=1:alert("이미 좋아요를 눌렀습니다.")}}catch(t){console.error("찜 업데이트 중 오류 발생:",t)}},async reportProduct(){try{if(this.product.Uid===this.userID)return;if(""===this.reportContent.trim())return void alert("신고 내용을 작성해주세요.");const t=await M.A.post(`http://localhost:3000/report/${this.ino}`,{Uid:this.userID,content:this.reportContent});t.data.success?(alert("신고가 접수되었습니다."),this.product.Rp_cnt+=1,this.reportContent=""):(alert("이미 신고한 게시물입니다."),this.reportContent="",console.error("신고 중복"))}catch(t){console.error("신고 처리 중 오류 발생:",t)}},async deleteProduct(){try{if(!confirm("정말로 삭제하시겠습니까?"))return;const t=await M.A.get(`http://localhost:3000/delete/${this.ino}`);t.data.success?(alert("게시글이 삭제되었습니다."),this.$router.push("/search")):console.error("게시글 삭제 실패")}catch(t){console.error("게시글 삭제 중 오류 발생:",t)}},requestProduct(){this.$router.push(`/request/${this.ino}`)},updateProduct(){this.$router.push(`/update/${this.ino}`)},setRating(t){this.Ratings=t},async submitReview(){if(0!==this.Ratings&&this.ReviewContent)try{const t=await M.A.post(`http://localhost:3000/review/${this.ino}`,{S_uid:this.product.Uid,B_uid:this.userID,Content:this.ReviewContent,Ratings:this.Ratings});t.data.success?(alert("후기가 저장되었습니다."),window.location.reload()):alert("후기 저장에 실패했습니다.")}catch(t){console.error("후기 저장 중 오류 발생:",t)}else alert("내용 및 별점을 입력해주세요!")},toggleAnswerInput(t){this.selectedQuestionIndex===t?this.selectedQuestionIndex=null:this.selectedQuestionIndex=t},async deleteQnA(t){if(confirm("정말로 삭제하시겠습니까?"))try{const e=await M.A.delete(`http://localhost:3000/deleteQnA/${t}`);e.data.success?(alert("삭제되었습니다."),window.location.reload()):(alert("삭제 실패"),console.error("삭제 실패:",e.data.error))}catch(e){alert("삭제 중 오류 발생"),console.error("삭제 중 오류 발생:",e)}},async submitQnA(){if(this.newQnA.trim())try{const t=await M.A.post(`http://localhost:3000/writeQnA/${this.ino}`,{Ino:this.ino,Content:this.newQnA,Private:this.Private,Q_uid:this.userID,Ans_Qno:this.selectedQuestionIndex});t.data.success?(alert("등록되었습니다."),this.newQnA="",window.location.reload()):(alert("등록 실패"),console.error("등록 실패:",t.data.error))}catch(t){alert("등록 중 오류 발생"),console.error("등록 중 오류 발생:",t)}else alert("답변 내용을 입력해주세요.")}},mounted(){this.fetchProductDetails()}},tt=n(1241);const et=(0,tt.A)(Z,[["render",H],["__scopeId","data-v-2595577c"]]);var nt=et}}]);
//# sourceMappingURL=544.f09f1666.js.map