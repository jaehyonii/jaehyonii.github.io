{"version":3,"file":"js/398.23f04c3c.js","mappings":"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","sources":["webpack://frontend/./src/pages/board/ViewPost.vue","webpack://frontend/./src/pages/board/ViewPost.vue?c80f"],"sourcesContent":["<template>\r\n  <div class=\"view-post-container\">\r\n    <!-- 게시글 정보 -->\r\n    <div class=\"post-info\">\r\n      <div class=\"post-title-meta\">\r\n        <div class=\"post-title\">{{ post.Title }}</div>\r\n        <div class=\"post-meta\">\r\n          {{ post.Uid }} <br />\r\n          {{ formatDate(post.Reg_date) }}\r\n        </div>\r\n      </div>\r\n      <!-- 본문 내용 -->\r\n      <div class=\"post-content\">\r\n        {{ post.Content }}\r\n      </div>\r\n      <!-- 이미지 -->\r\n      <div class=\"post-image-container\">\r\n        <div v-if=\"post.Image && typeof post.Image === 'string'\">\r\n          <img\r\n            :src=\"`data:image/jpeg;base64,${post.Image}`\"\r\n            alt=\"첨부 이미지\"\r\n            class=\"post-image\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 버튼 섹션 -->\r\n    <div class=\"button-container\">\r\n      <button class=\"back-button\" @click=\"goBack\">목록으로</button>\r\n      <button\r\n        class=\"delete-button\"\r\n        v-if=\"canDeletePost || isAdmin\"\r\n        @click=\"confirmDeletePost\"\r\n      >\r\n        삭제하기\r\n      </button>\r\n      <button\r\n        class=\"edit-button\"\r\n        v-if=\"canEditPost\"\r\n        @click=\"goToUpdatePost\"\r\n      >\r\n        수정하기\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nexport default {\r\n  name: \"ViewPost\",\r\n  data() {\r\n    return {\r\n      post: {\r\n        Title: \"\",\r\n        Uid: \"\",\r\n        Reg_date: \"\",\r\n        Content: \"\",\r\n        Image: null, // 이미지 추가\r\n      },\r\n      id: null,\r\n      auth: null, // 사용자 Auth 정보\r\n      previousPage: 1,\r\n    };\r\n  },\r\n  computed: {\r\n    canDeletePost() {\r\n      return this.id === this.post.Uid;\r\n    },\r\n    canEditPost() {\r\n      return this.id === this.post.Uid;\r\n    },\r\n    isAdmin() {\r\n      return this.auth === 1;\r\n    },\r\n  },\r\n  async created() {\r\n    const query = this.$route.query;\r\n\r\n    if (!query.uid || !query.regDate) {\r\n      alert(\"잘못된 요청입니다.\");\r\n      this.goBack();\r\n      return;\r\n    }\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      try {\r\n        const user = jwtDecode(token);\r\n        this.id = user.userID;\r\n        this.auth = user.auth; // Auth 정보 저장\r\n      } catch (error) {\r\n        console.error(\"JWT 디코딩 오류:\", error);\r\n        this.$router.push(\"/login\");\r\n        return;\r\n      }\r\n    } else {\r\n      alert(\"로그인이 필요합니다.\");\r\n      this.$router.push(\"/login\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.get(\"http://localhost:3000/viewpost\", {\r\n        params: {\r\n          uid: query.uid,\r\n          regDate: query.regDate,\r\n        },\r\n      });\r\n      this.post = response.data;\r\n    } catch (error) {\r\n      console.error(\"게시글 데이터를 가져오는 중 오류 발생:\", error);\r\n      alert(\"게시글 정보를 불러오는 데 실패했습니다.\");\r\n      this.goBack();\r\n    }\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.push({ name: \"board\", params: { page: this.previousPage } });\r\n    },\r\n    goToUpdatePost() {\r\n      console.log(\"수정하기 버튼 클릭\");\r\n      this.$router.push({\r\n        name: \"UpdatePost\",\r\n        query: {\r\n          uid: this.post.Uid,\r\n          regDate: this.post.Reg_date,\r\n          title: this.post.Title,\r\n          content: this.post.Content,\r\n          images: this.post.Image ? [`data:image/jpeg;base64,${this.post.Image}`] : [],\r\n        },\r\n      });\r\n    },\r\n    confirmDeletePost() {\r\n      if (confirm(\"정말로 삭제하시겠습니까?\")) {\r\n        this.deletePost();\r\n      }\r\n    },\r\n    async deletePost() {\r\n      try {\r\n        console.log(\"UID delete:\", this.post.Uid);\r\n        console.log(\"UID Reg Date:\", this.post.Reg_date);\r\n\r\n        await axios.delete(\"http://localhost:3000/deletepost\", {\r\n          data: {\r\n            uid: this.post.Uid,\r\n            regDate: this.post.Reg_date,\r\n          },\r\n        });\r\n\r\n        alert(\"게시글이 삭제되었습니다.\");\r\n        this.goBack();\r\n      } catch (error) {\r\n        console.error(\"게시글 삭제 중 오류 발생:\", error);\r\n        alert(\"게시글 삭제에 실패했습니다.\");\r\n      }\r\n    },\r\n    formatDate(dateString) {\r\n      const date = new Date(dateString);\r\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(\r\n        2,\r\n        \"0\"\r\n      )}-${String(date.getDate()).padStart(2, \"0\")} ${String(\r\n        date.getHours()\r\n      ).padStart(2, \"0\")}:${String(date.getMinutes()).padStart(\r\n        2,\r\n        \"0\"\r\n      )}:${String(date.getSeconds()).padStart(2, \"0\")}`;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n\r\n<style scoped>\r\n.view-post-container {\r\n  width: 960px;\r\n  margin: 20px auto;\r\n  padding: 20px;\r\n  border-style: solid;\r\n  border-color: black;\r\n  border-radius: 10px;\r\n  background-color: #fff;\r\n}\r\n\r\n/* 게시글 제목과 작성자/작성일 */\r\n.post-title-meta {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.post-title {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  text-align: left; /* 좌측 정렬 */\r\n}\r\n\r\n.post-meta {\r\n  text-align: right; /* 작성자/작성일 우측 정렬 */\r\n  font-size: 14px;\r\n  color: black; /* 검정 글씨로 변경 */\r\n  line-height: 1.5;\r\n}\r\n\r\n/* 본문 내용 */\r\n.post-content {\r\n  border: 1px solid #000;\r\n  padding: 20px;\r\n  margin-top: 20px;\r\n  font-size: 16px;\r\n  line-height: 1.6;\r\n  overflow-wrap: break-word; /* 긴 단어를 줄 바꿈 */\r\n  background-color: #fff; /* 배경색을 하얀색으로 변경 */\r\n  min-height: 150px; /* 최소 높이 설정 */\r\n  text-align: left; /* 좌측 정렬 */\r\n}\r\n\r\n/* 이미지 섹션 */\r\n.post-image-container {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.post-image {\r\n  max-width: 100%;\r\n  max-height: 300px; /* 최대 높이 제한 */\r\n  object-fit: contain; /* 이미지 비율 유지 */\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n  margin: 10px 0;\r\n}\r\n\r\n/* 이미지가 없을 때 */\r\n.no-image {\r\n  font-size: 14px;\r\n  color: gray;\r\n  margin-top: 20px;\r\n}\r\n\r\n/* 버튼 섹션 */\r\n.button-container {\r\n  display: flex;\r\n  justify-content: flex-end; /* 버튼 오른쪽 정렬 */\r\n  gap: 10px; /* 버튼 간격 */\r\n  margin-top: 20px;\r\n}\r\n\r\n.back-button {\r\n  padding: 10px 20px;\r\n  font-size: 14px;\r\n  border: 1px solid black;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  color: white;\r\n  background-color: #007bff;\r\n  transition: background-color 0.3s;\r\n}\r\n.edit-button {\r\n  padding: 10px 20px;\r\n  font-size: 14px;\r\n  border: 1px solid black;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  color: white;\r\n  background-color: green;\r\n  transition: background-color 0.3s;\r\n}\r\n.back-button:hover {\r\n  background-color: blue;\r\n}\r\n\r\n.edit-button:hover {\r\n  background-color: darkgreen;\r\n}\r\n\r\n.delete-button {\r\n  color: white;\r\n  background-color: red;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 10px 20px;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.delete-button:hover {\r\n  background-color: darkred;\r\n}\r\n</style>\r\n\r\n","import { render } from \"./ViewPost.vue?vue&type=template&id=41286046&scoped=true\"\nimport script from \"./ViewPost.vue?vue&type=script&lang=js\"\nexport * from \"./ViewPost.vue?vue&type=script&lang=js\"\n\nimport \"./ViewPost.vue?vue&type=style&index=0&id=41286046&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-41286046\"]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","$data","post","Title","_hoisted_5","_createTextVNode","Uid","$options","formatDate","Reg_date","_hoisted_6","Content","_hoisted_7","Image","_hoisted_8","src","alt","_hoisted_9","_createCommentVNode","_hoisted_10","onClick","_cache","args","goBack","canDeletePost","isAdmin","confirmDeletePost","canEditPost","goToUpdatePost","name","data","id","auth","previousPage","computed","this","created","query","$route","uid","regDate","alert","token","localStorage","getItem","$router","push","user","jwtDecode","userID","error","console","response","axios","get","params","methods","page","log","title","content","images","confirm","deletePost","delete","dateString","date","Date","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","__exports__","render"],"sourceRoot":""}