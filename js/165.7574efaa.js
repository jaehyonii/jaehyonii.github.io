"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[165],{1165:function(e,t,s){s.r(t),s.d(t,{default:function(){return M}});var a=s(6768),r=s(4232);const l={key:0},n={key:1},o={key:2,id:"app"},i={class:"main-content"},u={class:"profile-and-products"},c={class:"my-products"},d={key:0,class:"profile"},g={class:"cancelBtn"},p={class:"detail"},h={class:"profile-image"},k=["src"],m={class:"profile-box"},L={key:1,class:"item-table"},v=["onClick"],P={class:"item-title"},f={href:"#"},y={class:"item-price"},_={class:"post-time"},b={key:2,class:"item-table"},C=["onClick"],I={class:"item-title"},E={href:"#"},A={class:"item-price"},S={class:"post-time"},X={class:"pagination"},x=["disabled"],R=["disabled"];function $(e,t,s,$,W,U){return W.loading?((0,a.uX)(),(0,a.CE)("div",l,"Loading...")):W.error?((0,a.uX)(),(0,a.CE)("div",n,(0,r.v_)(W.error),1)):((0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("main",i,[(0,a.Lk)("div",u,[(0,a.Lk)("section",c,[t[15]||(t[15]=(0,a.Lk)("h2",null,"신고 당한 사용자",-1)),W.detail?((0,a.uX)(),(0,a.CE)("section",d,[(0,a.Lk)("div",g,[(0,a.Lk)("button",{class:"btn",onClick:t[0]||(t[0]=e=>W.detail=!1)},"X")]),(0,a.Lk)("div",p,[(0,a.Lk)("div",h,[W.user.Profile_image?((0,a.uX)(),(0,a.CE)("img",{key:0,src:`data:image/jpeg;base64,${W.user.Profile_image}`,alt:"Image from server"},null,8,k)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",m,[(0,a.Lk)("p",null,[t[4]||(t[4]=(0,a.Lk)("strong",null,"아이디:",-1)),(0,a.eW)(" "+(0,r.v_)(W.user.Id||"정보 없음"),1)]),(0,a.Lk)("p",null,[t[5]||(t[5]=(0,a.Lk)("strong",null,"비밀번호:",-1)),(0,a.eW)(" "+(0,r.v_)(W.user.Passwd||"정보 없음"),1)]),(0,a.Lk)("p",null,[t[6]||(t[6]=(0,a.Lk)("strong",null,"이름:",-1)),(0,a.eW)(" "+(0,r.v_)(W.user.Uname||"정보 없음"),1)]),(0,a.Lk)("p",null,[t[7]||(t[7]=(0,a.Lk)("strong",null,"닉네임:",-1)),(0,a.eW)(" "+(0,r.v_)(W.user.Nickname||"정보 없음"),1)]),(0,a.Lk)("p",null,[t[8]||(t[8]=(0,a.Lk)("strong",null,"나이:",-1)),(0,a.eW)(" "+(0,r.v_)(W.user.Age||"정보 없음"),1)]),(0,a.Lk)("p",null,[t[9]||(t[9]=(0,a.Lk)("strong",null,"성별:",-1)),(0,a.eW)(" "+(0,r.v_)(W.user.Sex||"정보 없음"),1)]),(0,a.Lk)("p",null,[t[10]||(t[10]=(0,a.Lk)("strong",null,"전화번호:",-1)),(0,a.eW)(" "+(0,r.v_)(W.user.Phone||"정보 없음"),1)]),(0,a.Lk)("p",null,[t[11]||(t[11]=(0,a.Lk)("strong",null,"이메일:",-1)),(0,a.eW)(" "+(0,r.v_)(W.user.Email||"정보 없음"),1)]),(0,a.Lk)("p",null,[t[12]||(t[12]=(0,a.Lk)("strong",null,"주소:",-1)),(0,a.eW)(" "+(0,r.v_)(W.user.Address||"정보 없음"),1)])])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>{U.banUser(W.user.Id),U.getRpUserList(),W.detail=!1})},"회원 탈퇴")])):(0,a.Q3)("",!0),W.detail?((0,a.uX)(),(0,a.CE)("table",b,[t[14]||(t[14]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"title-column"},"제목"),(0,a.Lk)("th",{class:"price-column"},"등록 날짜"),(0,a.Lk)("th",{class:"date-column"},"신고 횟수")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.lists,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:(0,r.C4)({notice:null!==W.user.Id}),onClick:t=>U.goToView(e.Ino)},[(0,a.Lk)("td",I,[(0,a.Lk)("a",E,(0,r.v_)(e.Title),1)]),(0,a.Lk)("td",A,(0,r.v_)(U.formatDate(e.Reg_date)),1),(0,a.Lk)("td",S,(0,r.v_)(e.Report_cnt),1)],10,C)))),128))])])):((0,a.uX)(),(0,a.CE)("table",L,[t[13]||(t[13]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"title-column"},"아이디"),(0,a.Lk)("th",{class:"price-column"},"신고 횟수"),(0,a.Lk)("th",{class:"date-column"},"평균 평판")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(U.paginatedPosts,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:(0,r.C4)({notice:null!==e.Id}),onClick:t=>{U.getRpUser(e.Id),U.getRpList(e.Id)}},[(0,a.Lk)("td",P,[(0,a.Lk)("a",f,(0,r.v_)(e.Id),1)]),(0,a.Lk)("td",y,(0,r.v_)(e.Rp_cnt),1),(0,a.Lk)("td",_,(0,r.v_)(e.Avg_rating),1)],10,v)))),128))])]))]),(0,a.Lk)("div",X,[(0,a.Lk)("p",null,"페이지 "+(0,r.v_)(U.currentPage)+" / "+(0,r.v_)(U.totalPages),1),(0,a.Lk)("button",{class:"pagination-button",onClick:t[2]||(t[2]=(...e)=>U.prevPage&&U.prevPage(...e)),disabled:1===U.currentPage}," 이전 페이지 ",8,x),(0,a.Lk)("button",{class:"pagination-button",onClick:t[3]||(t[3]=(...e)=>U.nextPage&&U.nextPage(...e)),disabled:U.currentPage===U.totalPages}," 다음 페이지 ",8,R)])])])]))}s(4114);var W=s(4373),U={props:["page"],data(){return{reports:[],user:[],lists:[],itemsPerPage:5,detail:!1,loading:!0,error:null}},mounted(){this.getRpUserList()},computed:{currentPage(){return parseInt(this.page)||1},totalPages(){return Math.ceil(this.reports.length/this.itemsPerPage)||1},paginatedPosts(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.reports.slice(e,t)}},methods:{formatDate(e){if(!e)return"N/A";const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},nextPage(){this.currentPage<this.totalPages&&this.$router.push({name:"mylike",params:{page:this.currentPage+1}})},prevPage(){this.currentPage>1&&this.$router.push({name:"mylike",params:{page:this.currentPage-1}})},getRpUserList(){const e=localStorage.getItem("token");W.A.get("http://localhost:3000/mypage/manage",{headers:{Authorization:`Bearer ${e}`}}).then((e=>{this.reports=e.data.reports,console.log("reports: "+JSON.stringify(this.reports))})).catch((e=>{console.error("Error fetching MyPage data:",e),"Item not exists"===e.response.data.message?this.error=null:e.response&&e.response.data?this.error=e.response.data.message||"Failed to load data":this.error="An unexpected error occurred"})).finally((()=>{this.loading=!1}))},getRpUser(e){W.A.get("http://localhost:3000/mypage/manage/detail",{headers:{Id:e}}).then((e=>{this.user=e.data.user,console.log("user: "+JSON.stringify(this.user))})).catch((e=>{console.error("Error fetching MyPage data:",e),"Item not exists"===e.response.data.message?this.error=null:e.response&&e.response.data?this.error=e.response.data.message||"Failed to load data":this.error="An unexpected error occurred"})).finally((()=>{this.detail=!0}))},getRpList(e){W.A.get("http://localhost:3000/mypage/manage/list",{headers:{Id:e}}).then((e=>{this.lists=e.data.lists,console.log("lists: "+JSON.stringify(this.lists))})).catch((e=>{console.error("Error fetching MyPage data:",e),"Item not exists"===e.response.data.message?this.error=null:e.response&&e.response.data?this.error=e.response.data.message||"Failed to load data":this.error="An unexpected error occurred"})).finally((()=>{this.detail=!0}))},async banUser(e){try{const t=await W.A.delete("http://localhost:3000/mypage/manage/ban",{data:{Id:e}});console.log("삭제 성공:",t.data),alert("삭제 성공")}catch(t){console.error("삭제 실패:",t),alert("삭제 실패")}},goToView(e){this.$router.push({name:"read",params:{ino:e}})}}},w=s(1241);const F=(0,w.A)(U,[["render",$],["__scopeId","data-v-330c32b9"]]);var M=F}}]);
//# sourceMappingURL=165.7574efaa.js.map