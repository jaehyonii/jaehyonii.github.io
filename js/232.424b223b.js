"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[232],{6232:function(e,l,n){n.r(l),n.d(l,{default:function(){return _}});n(4114);var a=n(6768),r=n(4232),t=n(5130);const o={key:0},u={key:1},s={key:2,id:"app"},i={class:"main-content"},d={class:"sidebar"},p={class:"profile"},k={class:"profile-content"},g={class:"profile-left"},m={class:"profile-right"},c={class:"profile-image-wrapper"},L=["src"],h={key:1},f={class:"form-group"},b=["src"];function y(e,l,n,y,v,C){return v.loading?((0,a.uX)(),(0,a.CE)("div",o,"Loading...")):v.error?((0,a.uX)(),(0,a.CE)("div",u,(0,r.v_)(v.error),1)):((0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("main",i,[(0,a.Lk)("aside",d,[(0,a.Lk)("ul",null,[(0,a.Lk)("li",{onClick:l[0]||(l[0]=l=>e.$router.push("/mypage"))},"나의 정보 보기"),(0,a.Lk)("li",{onClick:l[1]||(l[1]=l=>e.$router.push("/mypage/sale"))},"나의 판매 내역"),(0,a.Lk)("li",{onClick:l[2]||(l[2]=l=>e.$router.push("/mypage/purchase"))},"나의 구매 내역"),(0,a.Lk)("li",{onClick:l[3]||(l[3]=l=>e.$router.push("/mypage/like"))},"내가 찜한 상품")])]),(0,a.Lk)("section",p,[l[26]||(l[26]=(0,a.Lk)("h2",null,"사용자 프로필 수정",-1)),(0,a.Lk)("div",k,[(0,a.Lk)("div",g,[(0,a.Lk)("label",null,[l[15]||(l[15]=(0,a.Lk)("strong",null,"아이디:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=e=>v.user.Id=e),disabled:""},null,512),[[t.Jo,v.user.Id]])]),(0,a.Lk)("label",null,[l[16]||(l[16]=(0,a.Lk)("strong",null,"비밀번호:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":l[5]||(l[5]=e=>v.user.Passwd=e),required:""},null,512),[[t.Jo,v.user.Passwd]])]),(0,a.Lk)("label",null,[l[17]||(l[17]=(0,a.Lk)("strong",null,"이름:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=e=>v.user.Uname=e),required:""},null,512),[[t.Jo,v.user.Uname]])]),(0,a.Lk)("label",null,[l[18]||(l[18]=(0,a.Lk)("strong",null,"닉네임:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=e=>v.user.Nickname=e)},null,512),[[t.Jo,v.user.Nickname]])]),(0,a.Lk)("label",null,[l[19]||(l[19]=(0,a.Lk)("strong",null,"나이:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":l[8]||(l[8]=e=>v.user.Age=e),required:""},null,512),[[t.Jo,v.user.Age]])]),(0,a.Lk)("label",null,[l[21]||(l[21]=(0,a.Lk)("strong",null,"성별:",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":l[9]||(l[9]=e=>v.user.Sex=e),required:""},l[20]||(l[20]=[(0,a.Lk)("option",{value:"남"},"남성",-1),(0,a.Lk)("option",{value:"여"},"여성",-1)]),512),[[t.u1,v.user.Sex]])]),(0,a.Lk)("label",null,[l[22]||(l[22]=(0,a.Lk)("strong",null,"전화번호:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":l[10]||(l[10]=e=>v.user.Phone=e),required:""},null,512),[[t.Jo,v.user.Phone]])]),(0,a.Lk)("label",null,[l[23]||(l[23]=(0,a.Lk)("strong",null,"이메일:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":l[11]||(l[11]=e=>v.user.Email=e),required:""},null,512),[[t.Jo,v.user.Email]])]),(0,a.Lk)("label",null,[l[24]||(l[24]=(0,a.Lk)("strong",null,"주소:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":l[12]||(l[12]=e=>v.user.Address=e),required:""},null,512),[[t.Jo,v.user.Address]])])]),(0,a.Lk)("div",m,[(0,a.Lk)("div",c,[v.user.Profile_image?((0,a.uX)(),(0,a.CE)("img",{key:0,src:`data:image/jpeg;base64,${v.user.Profile_image}`,alt:"Image from server"},null,8,L)):((0,a.uX)(),(0,a.CE)("p",h,"이미지가 없습니다"))]),(0,a.Lk)("div",f,[l[25]||(l[25]=(0,a.Lk)("label",null,"프로필 이미지 변경:",-1)),(0,a.Lk)("input",{type:"file",onChange:l[13]||(l[13]=(...e)=>C.onImageChange&&C.onImageChange(...e)),accept:"image/*"},null,32),v.new_image?((0,a.uX)(),(0,a.CE)("img",{key:0,src:`data:image/jpeg;base64,${v.new_image}`,alt:"Image from local"},null,8,b)):(0,a.Q3)("",!0)])])]),(0,a.Lk)("button",{class:"save-button",onClick:l[14]||(l[14]=(...e)=>C.saveProfile&&C.saveProfile(...e))},"프로필 저장")])])]))}var v=n(4373),C={data(){return{user:{Uname:null,Age:null,Sex:null,Phone:null,Email:null,Address:null,Id:null,Passwd:null,Auth:null,Nickname:null,Profile_image:null,Rp_cnt:null,Rating_cnt:null,Avg_rating:null},new_image:null,loading:!0,error:null}},mounted(){const e=localStorage.getItem("token");v.A.get("http://localhost:3000/mypage",{headers:{Authorization:`Bearer ${e}`}}).then((e=>{this.user=e.data.user})).catch((e=>{console.error("Error fetching MyPage data:",e),e.response&&e.response.data?this.error=e.response.data.message||"Failed to load data":this.error="An unexpected error occurred"})).finally((()=>{this.loading=!1}))},methods:{validateForm(){const e=["Passwd","Uname","Age","Sex","Phone","Email","Address"];for(const l of e)if(!this.user[l])return alert(`${l}를(을) 입력해주세요.`),!1;return!0},onImageChange(e){this.new_image=e.target.files[0]},async saveProfile(){if(!this.validateForm())return;const e=new FormData;for(const n in this.user)"Profile_image"===n?this.new_image?e.append(n,this.new_image):e.append(n,""):e.append(n,this.user[n]);try{const l=await v.A.post("http://localhost:3000/mypage",e,{headers:{"Content-Type":"multipart/form-data"}});alert("업데이트 성공"),console.log("업데이트 성공:",l.data),this.$router.push("/mypage")}catch(l){alert("업데이트 실패"),console.error("업데이트 실패:",l.response?.data||l.message)}}}},w=n(1241);const P=(0,w.A)(C,[["render",y],["__scopeId","data-v-0e2fce52"]]);var _=P}}]);
//# sourceMappingURL=232.424b223b.js.map