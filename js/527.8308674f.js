"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[527],{1527:function(e,t,o){o.r(t),o.d(t,{default:function(){return V}});var l=o(6768),a=o(5130);const i={class:"form-container"},s={class:"form-group row"},r={class:"form-group row"},p={class:"photo-upload"},n={class:"photo-previews"},d=["src"],c=["onClick"],u={class:"form-group row"},h={class:"form-group row description-group"},m={class:"form-group row"},g={key:0,class:"form-group row"},k={class:"location-select"},L={class:"form-group row"},b={class:"tags-select"},y={class:"form-group row"},f={class:"category-select"},v={class:"form-group row"},w={class:"category-select"},C={class:"form-actions"};function U(e,t,o,U,F,D){return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.Lk)("div",s,[t[13]||(t[13]=(0,l.Lk)("label",{for:"title"},"제목",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"title",placeholder:"제목을 입력하세요","onUpdate:modelValue":t[0]||(t[0]=e=>F.title=e)},null,512),[[a.Jo,F.title]])]),(0,l.Lk)("div",r,[t[14]||(t[14]=(0,l.Lk)("label",{for:"photos"},"사진",-1)),(0,l.Lk)("div",p,[(0,l.Lk)("input",{type:"file",id:"photos",accept:"image/*",multiple:"",onChange:t[1]||(t[1]=(...e)=>D.handleFileUpload&&D.handleFileUpload(...e)),ref:"fileInput",style:{display:"none"}},null,544),(0,l.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>D.triggerFileInput&&D.triggerFileInput(...e))},"파일 선택"),(0,l.Lk)("div",n,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(F.previews,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"photo-item"},[(0,l.Lk)("img",{src:e,alt:"미리보기 이미지",class:"preview-image"},null,8,d),(0,l.Lk)("button",{type:"button",onClick:e=>D.handleFileDelete(t)},"삭제",8,c)])))),128))])])]),(0,l.Lk)("div",u,[t[15]||(t[15]=(0,l.Lk)("label",{for:"price"},"가격",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"price",placeholder:"가격을 입력하세요","onUpdate:modelValue":t[3]||(t[3]=e=>F.price=e)},null,512),[[a.Jo,F.price]])]),(0,l.Lk)("div",h,[t[16]||(t[16]=(0,l.Lk)("label",{for:"description"},"설명",-1)),(0,l.bo)((0,l.Lk)("textarea",{id:"description",placeholder:"판매하실 상품의 설명을 적어주세요","onUpdate:modelValue":t[4]||(t[4]=e=>F.description=e)},null,512),[[a.Jo,F.description]])]),(0,l.Lk)("div",m,[t[19]||(t[19]=(0,l.Lk)("label",null,"거래 방식",-1)),(0,l.Lk)("div",null,[(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=e=>F.Deal_way=e),value:0},null,512),[[a.XL,F.Deal_way]]),t[17]||(t[17]=(0,l.eW)(" 직거래 "))]),(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=e=>F.Deal_way=e),value:1},null,512),[[a.XL,F.Deal_way]]),t[18]||(t[18]=(0,l.eW)(" 택배거래 "))])])]),0===F.Deal_way?((0,l.uX)(),(0,l.CE)("div",g,[t[20]||(t[20]=(0,l.Lk)("label",{for:"location"},"거래희망장소",-1)),(0,l.Lk)("div",k,[(0,l.Lk)("button",{type:"button",onClick:t[7]||(t[7]=(...e)=>D.openAddressPopup&&D.openAddressPopup(...e))},"도로명 주소 검색"),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"location",placeholder:"거래희망장소를 입력 또는 검색해주세요","onUpdate:modelValue":t[8]||(t[8]=e=>F.location=e)},null,512),[[a.Jo,F.location]])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",L,[t[21]||(t[21]=(0,l.Lk)("label",{for:"tags"},"태그",-1)),(0,l.Lk)("div",b,[(0,l.bo)((0,l.Lk)("input",{type:"text",id:"tags",placeholder:"태그를 입력해주세요","onUpdate:modelValue":t[9]||(t[9]=e=>F.tags=e)},null,512),[[a.Jo,F.tags]])])]),(0,l.Lk)("div",y,[t[22]||(t[22]=(0,l.Lk)("label",{for:"mainCategory"},"대분류",-1)),(0,l.Lk)("div",f,[(0,l.bo)((0,l.Lk)("input",{type:"text",id:"mainCategory",placeholder:"대분류를 입력해주세요","onUpdate:modelValue":t[10]||(t[10]=e=>F.mainCategory=e)},null,512),[[a.Jo,F.mainCategory]])])]),(0,l.Lk)("div",v,[t[23]||(t[23]=(0,l.Lk)("label",{for:"subCategory"},"소분류",-1)),(0,l.Lk)("div",w,[(0,l.bo)((0,l.Lk)("input",{type:"text",id:"subCategory",placeholder:"소분류를 입력해주세요","onUpdate:modelValue":t[11]||(t[11]=e=>F.subCategory=e)},null,512),[[a.Jo,F.subCategory]])])]),(0,l.Lk)("div",C,[(0,l.Lk)("button",{class:"register",onClick:t[12]||(t[12]=(...e)=>D.submitForm&&D.submitForm(...e))},"등록하기")])])}o(4114),o(8992),o(4520),o(3949),o(4603),o(7566),o(8721);var F=o(4373),D=o(5068),_={name:"FormComponent",data(){return{title:"",photos:[],previews:[],price:"",description:"",Deal_way:1,location:"",tags:"",mainCategory:"",subCategory:"",maxPhotos:3}},computed:{isFormValid(){const e=0!==this.Deal_way||!!this.location;return!!this.title&&!!this.price&&!!this.description&&null!==this.Deal_way&&e&&!!this.tags&&!!this.mainCategory&&!!this.subCategory&&this.photos.length>0}},methods:{openAddressPopup(){new window.daum.Postcode({oncomplete:e=>{this.location=e.address}}).open()},handleFileUpload(e){const t=Array.from(e.target.files),o=t.filter((e=>e.type.startsWith("image/"))),l=this.maxPhotos-this.photos.length;o.length>l?alert(`사진은 최대 ${this.maxPhotos}개까지 업로드 가능합니다.`):o.slice(0,l).forEach((e=>{const t=URL.createObjectURL(e);this.photos.push(e),this.previews.push(t)}))},triggerFileInput(){this.$refs.fileInput.click()},handleFileDelete(e){URL.revokeObjectURL(this.previews[e]),this.photos.splice(e,1),this.previews.splice(e,1)},submitForm(){if(!this.isFormValid)return void alert("모든 필드를 입력해주세요.");const e=localStorage.getItem("token"),t=(0,D.s)(e),o=new FormData;o.append("Uid",t.userID),o.append("Title",this.title),o.append("Price",this.price),o.append("Content",this.description),o.append("Place",this.location),o.append("Group1",this.mainCategory),o.append("Group2",this.subCategory),o.append("Group3",this.tags),o.append("Deal_way",this.Deal_way),this.photos.forEach(((e,t)=>{0===t?o.append("Image",e):1===t?o.append("Subimg1",e):2===t&&o.append("Subimg2",e)})),F.A.post("http://localhost:3000/write",o).then((()=>{alert("등록 성공!"),this.resetForm(),this.$router.push({name:"search"})})).catch((e=>{alert("등록 실패. 다시 시도해주세요."),console.error(e)}))},resetForm(){this.title="",this.photos=[],this.previews.forEach((e=>URL.revokeObjectURL(e))),this.previews=[],this.price="",this.description="",this.isDirectTrade=!1,this.isDeliveryTrade=!1,this.location="",this.tags="",this.mainCategory="",this.subCategory=""}},mounted(){const e=document.createElement("script");e.src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",e.onload=()=>console.log("Daum Postcode API loaded"),document.head.appendChild(e)}},I=o(1241);const P=(0,I.A)(_,[["render",U],["__scopeId","data-v-25b20f22"]]);var V=P}}]);
//# sourceMappingURL=527.8308674f.js.map