"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[11],{1011:function(e,t,o){o.r(t),o.d(t,{default:function(){return $}});var i=o(6768),l=o(5130),a=o(4232);const s={class:"form-container"},r={class:"form-group row"},n={class:"form-group row"},p={class:"photo-upload"},u={key:0},d={key:1},c={key:2,class:"photo-preview"},h={class:"photo-item"},m=["src","alt"],k=["onUpdate:modelValue"],g=["onChange","disabled"],b=["onClick","disabled"],y={key:3,class:"photo-preview"},L={class:"photo-item"},v=["src","alt"],f=["onClick"],w={class:"form-group row"},C={class:"form-group row description-group"},U={class:"form-group row"},D={key:0,class:"form-group row"},_={class:"form-group row"},F={class:"form-group row"},S={class:"form-group row"},x={class:"form-actions"};function V(e,t,o,V,E,I){return(0,i.uX)(),(0,i.CE)("div",s,[(0,i.Lk)("div",r,[t[10]||(t[10]=(0,i.Lk)("label",{for:"title"},"제목",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"title",placeholder:"제목을 입력하세요","onUpdate:modelValue":t[0]||(t[0]=e=>E.title=e)},null,512),[[l.Jo,E.title]])]),(0,i.Lk)("div",n,[t[12]||(t[12]=(0,i.Lk)("label",{for:"photos"},"사진",-1)),(0,i.Lk)("div",p,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(3,((e,o)=>(0,i.Lk)("div",{key:o,class:"photo-section"},[0===o?((0,i.uX)(),(0,i.CE)("h4",u,"대표 이미지")):((0,i.uX)(),(0,i.CE)("h4",d,"서브 이미지 "+(0,a.v_)(o),1)),E.existPhotos[o]?((0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",h,[(0,i.Lk)("img",{src:`data:image/jpeg;base64,${E.existPhotos[o]}`,alt:`이미지 ${o+1} 미리보기`,class:"preview-image"},null,8,m),(0,i.Lk)("label",null,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":e=>E.photoSelection[o]=e},null,8,k),[[l.lH,E.photoSelection[o]]]),t[11]||(t[11]=(0,i.eW)(" 유지 "))])])])):(0,i.Q3)("",!0),(0,i.Lk)("input",{type:"file",accept:"image/*",onChange:e=>I.handleFileUpload(e,o),ref_for:!0,ref:"photoInput",disabled:E.photoSelection[o],style:{display:"none"}},null,40,g),(0,i.Lk)("button",{type:"button",onClick:()=>I.triggerFileInput(o),disabled:E.photoSelection[o]}," 이미지 선택 ",8,b),E.previews[o]?((0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("div",L,[(0,i.Lk)("img",{src:E.previews[o],alt:`새 이미지 ${o+1} 미리보기`,class:"preview-image"},null,8,v),(0,i.Lk)("button",{type:"button",onClick:()=>I.handleFileDelete(o)}," 삭제 ",8,f)])])):(0,i.Q3)("",!0)]))),64))])]),(0,i.Lk)("div",w,[t[13]||(t[13]=(0,i.Lk)("label",{for:"price"},"가격",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"price",placeholder:"가격을 입력하세요","onUpdate:modelValue":t[1]||(t[1]=e=>E.price=e)},null,512),[[l.Jo,E.price]])]),(0,i.Lk)("div",C,[t[14]||(t[14]=(0,i.Lk)("label",{for:"description"},"설명",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"description",placeholder:"판매하실 상품의 설명을 적어주세요","onUpdate:modelValue":t[2]||(t[2]=e=>E.description=e)},null,512),[[l.Jo,E.description]])]),(0,i.Lk)("div",U,[t[17]||(t[17]=(0,i.Lk)("label",null,"거래 방식",-1)),(0,i.Lk)("div",null,[(0,i.Lk)("label",null,[(0,i.bo)((0,i.Lk)("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=e=>E.Deal_way=e),value:0},null,512),[[l.XL,E.Deal_way]]),t[15]||(t[15]=(0,i.eW)(" 직거래 "))]),(0,i.Lk)("label",null,[(0,i.bo)((0,i.Lk)("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=e=>E.Deal_way=e),value:1},null,512),[[l.XL,E.Deal_way]]),t[16]||(t[16]=(0,i.eW)(" 택배거래 "))])])]),0===E.Deal_way?((0,i.uX)(),(0,i.CE)("div",D,[t[18]||(t[18]=(0,i.Lk)("label",{for:"location"},"거래희망장소",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"location",placeholder:"거래희망장소를 입력해주세요","onUpdate:modelValue":t[5]||(t[5]=e=>E.location=e)},null,512),[[l.Jo,E.location]])])):(0,i.Q3)("",!0),(0,i.Lk)("div",_,[t[19]||(t[19]=(0,i.Lk)("label",{for:"tags"},"태그",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"tags",placeholder:"태그를 입력해주세요","onUpdate:modelValue":t[6]||(t[6]=e=>E.tags=e)},null,512),[[l.Jo,E.tags]])]),(0,i.Lk)("div",F,[t[20]||(t[20]=(0,i.Lk)("label",{for:"mainCategory"},"대분류",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"mainCategory",placeholder:"대분류를 입력해주세요","onUpdate:modelValue":t[7]||(t[7]=e=>E.mainCategory=e)},null,512),[[l.Jo,E.mainCategory]])]),(0,i.Lk)("div",S,[t[21]||(t[21]=(0,i.Lk)("label",{for:"subCategory"},"소분류",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"subCategory",placeholder:"소분류를 입력해주세요","onUpdate:modelValue":t[8]||(t[8]=e=>E.subCategory=e)},null,512),[[l.Jo,E.subCategory]])]),(0,i.Lk)("div",x,[(0,i.Lk)("button",{class:"register",onClick:t[9]||(t[9]=(...e)=>I.submitForm&&I.submitForm(...e))},"수정하기")])])}o(4114),o(8992),o(3949),o(4603),o(7566),o(8721);var E=o(4373),I={props:["ino"],data(){return{title:"",existPhotos:[],photoSelection:[!1,!1,!1],photos:[null,null,null],previews:[null,null,null],price:"",description:"",Deal_way:1,location:"",tags:"",mainCategory:"",subCategory:""}},computed:{isFormValid(){const e=0!==this.Deal_way||!!this.location;return!!this.title&&!!this.price&&!!this.description&&null!==this.Deal_way&&e&&!!this.tags&&!!this.mainCategory&&!!this.subCategory}},methods:{async loadFormData(){try{const e=await E.A.get(`http://localhost:3000/read/${this.ino}`);if(e.data){const t=e.data[0];this.title=t.Title,this.price=t.Price,this.description=t.Content,this.Deal_way=t.Deal_way,this.location=t.Place,this.tags=t.Group3,this.mainCategory=t.Group1,this.subCategory=t.Group2,this.existPhotos=[t.Image,t.Subimg1,t.Subimg2],this.photoSelection.forEach(((e,t)=>{this.existPhotos[t]&&(this.photoSelection[t]=!0)}))}}catch(e){console.error("상품 정보를 가져오는 중 오류 발생:",e)}},handleFileUpload(e,t){const o=e.target.files[0];if(!o)return;if(!o.type.startsWith("image/"))return void alert("이미지 파일만 업로드 가능합니다.");this.previews[t]&&URL.revokeObjectURL(this.previews[t]);const i=URL.createObjectURL(o);this.photos[t]=o,this.previews[t]=i},triggerFileInput(e){const t=this.$refs.photoInput[e];t?t.click():console.error(`파일 입력 요소를 찾을 수 없습니다. (index: ${e})`)},handleFileDelete(e){this.previews[e]&&URL.revokeObjectURL(this.previews[e]),this.photos[e]=null,this.previews[e]=null},async submitForm(){if(!this.isFormValid)return void alert("모든 필드를 입력해주세요.");const e=new FormData;if(e.append("Title",this.title),e.append("Price",this.price),e.append("Content",this.description),e.append("Deal_way",this.Deal_way),e.append("Place",this.location),e.append("Group1",this.mainCategory),e.append("Group2",this.subCategory),e.append("Group3",this.tags),this.photoSelection.forEach(((t,o)=>{0===o?e.append("isImage",t):1===o?e.append("isSubimg1",t):2===o&&e.append("isSubimg2",t)})),this.photos.forEach(((t,o)=>{0===o?e.append("Image",t):1===o?e.append("Subimg1",t):2===o&&e.append("Subimg2",t)})),!1!==this.photoSelection[0]||null!=this.photos[0])try{await E.A.put(`http://localhost:3000/update/${this.ino}`,e),alert("수정 성공!"),this.$router.push(`/read/${this.ino}`)}catch(t){alert("수정 실패. 다시 시도해주세요."),console.error(t)}else alert("대표 이미지는 반드시 있어야 합니다.")}},mounted(){this.loadFormData()}},P=o(1241);const X=(0,P.A)(I,[["render",V],["__scopeId","data-v-399e1e3e"]]);var $=X}}]);
//# sourceMappingURL=11.f4d2a7cc.js.map